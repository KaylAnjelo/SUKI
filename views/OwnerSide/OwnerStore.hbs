<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{siteTitle}} - {{pageTitle}}</title>

  <!-- Keep original stylesheet reference -->
  <link rel="stylesheet" href="/styles.css">

  <!-- Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="/assets/SUKI Logo 2.png">
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="logo">
        <h2>{{companyName}}</h2>
      </div>
      <nav class="nav-menu">
        <ul>
          <li><a href="/dashboard"><i class="fas fa-chart-line"></i><span>Dashboard</span></a></li>
          <li class="has-submenu">
            <a href="#reports" class="menu-toggle">
              <i class="fas fa-file-alt"></i><span>Generate Reports</span><i class="fas fa-chevron-right"></i>
            </a>
            <ul class="submenu">
              <li><a href="/reports/sales"><i class="fas fa-circle"></i><span>Sales</span></a></li>
              <li><a href="/reports/transactions"><i class="fas fa-circle"></i><span>User Transactions</span></a></li>
              <li><a href="/reports/activity"><i class="fas fa-circle"></i><span>User Activity</span></a></li>
            </ul>
          </li>
          <li><a href="/transactions"><i class="fas fa-exchange-alt"></i><span>Transactions</span></a></li>
          <li class="active"><a href="/users"><i class="fas fa-fingerprint"></i><span>Users</span></a></li>
        </ul>
      </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <header class="header">
        <h1>{{pageTitle}}</h1>
        <div class="header-actions">
          <div class="notification-bell">
            <i class="fas fa-bell"></i>
            <span class="notification-dot"></span>
          </div>
          <span class="logout">{{logoutLabel}}</span>
        </div>
      </header>

      <a href="/users" class="back-link"><i class="fas fa-arrow-left"></i></a>

      {{#if stores.length}}
        <div class="stores-list">
          {{#each stores}}
          <div class="store-card">
            {{#if this.store_image}}
              <div class="store-logo">
                <img src="{{this.store_image}}" alt="{{this.name}} Logo">
              </div>
            {{/if}}
            <h3>{{this.name}}</h3>
            <p>
              Owner:
              {{this.ownerFirstName}}
              {{#if this.ownerSecondName}} {{this.ownerSecondName}}{{/if}}
              {{this.ownerLastName}}
            </p>
            <p>Email: <a href="mailto:{{this.ownerEmail}}" class="link">{{this.ownerEmail}}</a></p>
            <p>Contact: <a href="tel:{{this.contactInfo}}" class="link">{{this.contactInfo}}</a></p>
            <p>Location: {{this.location}}</p>
            <p>Status: {{this.status}}</p>
          </div>
          {{/each}}
        </div>
      {{else}}
        <div class="empty-panel">
          <div class="empty-icon"><i class="fas fa-store"></i></div>
          <div class="empty-title">No stores at this time</div>
          <div class="empty-subtitle">Start by adding your first store.</div>
        </div>
      {{/if}}

      <!-- Keep the original add button classes -->
      <button class="add-btn add-store-btn">+ Add Store</button>
    </div>
  </div>

  <!-- Logout Confirmation Modal (kept original button classes) -->
  <div id="logoutModal" class="modal">
    <div class="modal-content">
      <div class="modal-text">{{modal.text}}</div>
      <div class="modal-buttons">
        <button class="yes-btn">{{modal.yes}}</button>
        <button class="no-btn">{{modal.no}}</button>
      </div>
    </div>
  </div>

  <!-- Add Store Modal (single-step; old class names preserved) -->
  <div id="addStoreModal" class="modal">
    <div class="modal-content modal-animate">
      <div class="modal-header">
        <h2>Register Store</h2>
        <button class="store-close">&times;</button>
      </div>

      <form action="/users/stores/add" method="POST" enctype="multipart/form-data" class="add-store-form">
        <div class="input-group">
          <label for="storeName">Store Name</label>
          <input type="text" id="storeName" name="storeName" required>
        </div>

        <div class="input-group">
          <label>Owner's Name</label>
          <div style="display:flex; gap:8px; flex-wrap:wrap; align-items:center;">
            <input type="text" id="ownerFirstName" name="ownerFirstName" placeholder="First Name" required>
            <input type="text" id="ownerSecondName" name="ownerSecondName" placeholder="Middle Name (optional)" style="display:none;">
            <input type="text" id="ownerLastName" name="ownerLastName" placeholder="Last Name" required>
            <button type="button" id="toggleSecondNameBtn" class="yes-btn" style="padding:6px 10px;">+</button>
          </div>
        </div>

        <div class="input-group">
          <label for="ownerEmail">Owner's Email</label>
          <input type="email" id="ownerEmail" name="ownerEmail" required>
        </div>

        <div class="input-group">
          <label for="contactInfo">Contact Information</label>
          <input type="text" id="contactInfo" name="contactInfo" required>
        </div>

        <div class="input-group">
          <label for="location">Location</label>
          <input type="text" id="location" name="location" required>
        </div>

        <div class="input-group">
          <label for="storeImage">Store Logo</label>
          <input type="file" id="storeImage" name="storeImage" accept="image/*" required>
        </div>

        <div class="form-actions">
          <button type="button" class="store-cancel cancel-btn">Cancel</button>
          <button type="submit" class="submit-btn">Register</button>
        </div>
      </form>
    </div>
  </div>

  <!-- JS -->
  <script src="/stores.js"></script>
  <script>
    // Optional middle name toggle using original-ish buttons
    document.addEventListener("DOMContentLoaded", function () {
      const btn = document.getElementById("toggleSecondNameBtn");
      const mid = document.getElementById("ownerSecondName");
      if (btn) {
        btn.addEventListener("click", function () {
          const hidden = mid.style.display === "none" || mid.style.display === "";
          mid.style.display = hidden ? "inline-block" : "none";
          btn.textContent = hidden ? "âˆ’" : "+";
          if (!hidden) mid.value = "";
        });
      }
    });
  </script>
</body>
</html>