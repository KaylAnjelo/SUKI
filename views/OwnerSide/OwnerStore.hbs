<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{siteTitle}} - {{pageTitle}}</title>

  <!-- Styles -->
  <link rel="stylesheet" href="/AdminStyles.css">

  <!-- Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="/assets/SUKI Logo 2.png">
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <h2>{{companyName}}</h2>
      </div>
      <nav class="nav-menu">
        <ul>
          <li><a href="/dashboard"><i class="fas fa-chart-line"></i><span>Dashboard</span></a></li>
          <li><a href="/reports"><i class="fas fa-file-alt"></i><span>Reports</span></a></li>
          <li><a href="/transactions"><i class="fas fa-exchange-alt"></i><span>Transactions</span></a></li>
          <li class="active"><a href="/users"><i class="fas fa-fingerprint"></i><span>Users</span></a></li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <header class="header">
        <a href="/users" class="back-link"><i class="fas fa-arrow-left"></i></a>
        <h1>{{pageTitle}}</h1>
        <div class="header-actions">
          <div class="notification-bell">
            <i class="fas fa-bell"></i>
            <span class="notification-dot"></span>
          </div>
          <form action="/logout" method="POST">
            <button type="submit" class="logout">{{logoutLabel}}</button>
          </form>
        </div>
      </header>

      {{#if stores.length}}
        <div class="stores-list">
          {{#each stores}}
          <div class="store-card">
            {{#if this.store_image}}
              <div class="store-logo">
                <img src="{{this.store_image}}" alt="{{this.name}} Logo">
              </div>
            {{else}}
              <div class="store-logo">
                <i class="fas fa-store"></i>
              </div>
            {{/if}}
            <h3>{{this.name}}</h3>
            <p>
              Owner:
              {{this.ownerFirstName}}
              {{#if this.ownerSecondName}} {{this.ownerSecondName}}{{/if}}
              {{#if this.ownerMiddleInitial}} {{this.ownerMiddleInitial}}.{{/if}}
              {{this.ownerLastName}}
            </p>
            <p>Email: <a href="mailto:{{this.ownerEmail}}" class="link">{{this.ownerEmail}}</a></p>
            <p>Contact: <a href="tel:{{this.contactInfo}}" class="link">{{this.contactInfo}}</a></p>
            <p>Location: {{this.location}}</p>
            <form action="/users/stores/delete/{{this.id}}" method="POST" style="margin-top:10px;">
              <button type="submit" class="delete-btn">Delete</button>
            </form>
          </div>
          {{/each}}
        </div>
      {{else}}
        <div class="empty-panel">
          <div class="empty-icon"><i class="fas fa-store"></i></div>
          <div class="empty-title">No stores at this time</div>
          <div class="empty-subtitle">Start by adding your first store.</div>
        </div>
      {{/if}}

      <!-- Add Store Button -->
      <button class="add-btn add-store-btn">+ Add Store</button>
    </main>
  </div>

  <!-- Add Store Modal -->
  <div id="addStoreModal" class="modal">
    <div class="modal-content modal-animate">
      <div class="modal-header">
        <h2>Register Store</h2>
        <button class="store-close">&times;</button>
      </div>

      <form action="/users/stores/add" method="POST" enctype="multipart/form-data" class="add-store-form">
        <!-- Store Name -->
        <div class="input-group">
          <label for="storeName">Store Name</label>
          <input type="text" id="storeName" name="storeName" required>
        </div>

        <!-- Owner's First Name -->
        <div class="input-group">
          <label for="ownerFirstName">Owner's First Name</label>
          <input type="text" id="ownerFirstName" name="ownerFirstName" required>
        </div>

        <!-- Owner's Last Name -->
        <div class="input-group">
          <label for="ownerLastName">Owner's Last Name</label>
          <input type="text" id="ownerLastName" name="ownerLastName" required>
        </div>

        <!-- Owner's Email -->
        <div class="input-group">
          <label for="ownerEmail">Owner's Email</label>
          <input type="email" id="ownerEmail" name="ownerEmail" required>
        </div>

        <!-- Contact Information -->
        <div class="input-group">
          <label for="contactInfo">Contact Information</label>
          <input type="text" id="contactInfo" name="contactInfo" required>
        </div>

        <!-- Location -->
        <div class="input-group">
          <label for="location">Location</label>
          <input type="text" id="location" name="location" required>
        </div>

        <!-- Store Logo -->
        <div class="input-group">
          <label for="storeImage">Store Logo</label>
          <input type="file" id="storeImage" name="storeImage" accept="image/*" required>
        </div>

        <!-- Actions -->
        <div class="form-actions">
          <button type="button" class="store-cancel cancel-btn">Cancel</button>
          <button type="submit" class="submit-btn">Register</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script src="/notifications.js"></script>
  <script src="/logout.js"></script>
  <script src="/sidebar.js"></script>
  <script src="/stores.js"></script>
  <script>
    // Toggle modal visibility
    document.querySelector('.add-store-btn').addEventListener('click', function() {
      document.getElementById('addStoreModal').style.display = 'block';
    });

    document.querySelector('.store-close').addEventListener('click', function() {
      document.getElementById('addStoreModal').style.display = 'none';
    });

    // Preview uploaded store logo
    document.getElementById("storeImage").addEventListener("change", function(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const previewDiv = document.getElementById("imagePreview");
          previewDiv.innerHTML = `<img src="${e.target.result}" alt="Store Logo" style="max-width: 200px; max-height: 200px; object-fit: cover;">`;
        };
        reader.readAsDataURL(file);
      }
    });
  </script>
</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{siteTitle}} - {{pageTitle}}</title>
  <link rel="stylesheet" href="/styles.css">
  <link rel="icon" type="image/png" href="/assets/SUKI Logo 2.png">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="logo">
        <h2>{{companyName}}</h2>
      </div>
      <nav class="nav-menu">
        <ul>
          <li><a href="/dashboard"><i class="fas fa-chart-line"></i><span>Dashboard</span></a></li>
          <li class="has-submenu">
            <a href="#reports" class="menu-toggle">
              <i class="fas fa-file-alt"></i><span>Generate Reports</span><i class="fas fa-chevron-right"></i>
            </a>
            <ul class="submenu">
              <li><a href="/reports/sales"><i class="fas fa-circle"></i><span>Sales</span></a></li>
              <li><a href="/reports/transactions"><i class="fas fa-circle"></i><span>User Transactions</span></a></li>
              <li><a href="/reports/activity"><i class="fas fa-circle"></i><span>User Activity</span></a></li>
            </ul>
          </li>
          <li><a href="/transactions"><i class="fas fa-exchange-alt"></i><span>Transactions</span></a></li>
          <li class="active"><a href="/users"><i class="fas fa-fingerprint"></i><span>Users</span></a></li>
        </ul>
      </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <header class="header">
        <h1>{{pageTitle}}</h1>
        <div class="header-actions">
          <div class="notification-bell">
            <i class="fas fa-bell"></i>
            <span class="notification-dot"></span>
          </div>
          <span class="logout">{{logoutLabel}}</span>
        </div>
      </header>

      <a href="/users" class="back-link"><i class="fas fa-arrow-left"></i></a>

      {{#if stores.length}}
        <div class="stores-list">
          {{#each stores}}
          <div class="store-card">
            {{#if this.storeLogo}}
              <div class="store-logo">
                <img src="{{this.storeLogo}}" alt="{{this.name}} Logo" 
                     style="max-width:100px; max-height:100px; object-fit:contain; margin-bottom:10px;">
              </div>
            {{/if}}
            <h3>{{this.name}}</h3>
            <p>
              Owner: 
              {{this.ownerFirstName}}
              {{#if this.ownerSecondName}} {{this.ownerSecondName}}{{/if}}
              {{this.ownerLastName}}
            </p>
            <p>
              Email: 
              <a href="mailto:{{this.ownerEmail}}" class="link">{{this.ownerEmail}}</a>
            </p>
            <p>
              Contact: 
              <a href="tel:{{this.contactInfo}}" class="link">{{this.contactInfo}}</a>
            </p>
            <p>Location: {{this.location}}</p>
            <p>Status: {{this.status}}</p>
          </div>
          {{/each}}
        </div>
      {{else}}
        <div class="empty-panel">
          <div class="empty-icon"><i class="fas fa-store"></i></div>
          <div class="empty-title">No stores at this time</div>
          <div class="empty-subtitle">Start by adding your first store.</div>
        </div>
      {{/if}}

      <button class="btn-primary add-store-btn">+ Add Store</button>
    </div>
  </div>

  <!-- Logout Confirmation Modal -->
  <div id="logoutModal" class="modal">
    <div class="modal-content">
      <div class="modal-text">{{modal.text}}</div>
      <div class="modal-buttons">
        <button class="btn-primary">{{modal.yes}}</button>
        <button class="btn-secondary">{{modal.no}}</button>
      </div>
    </div>
  </div>

  <!-- Add Store Modal -->
  <div id="addStoreModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Register Store</h2>
        <button class="close store-close">&times;</button>
      </div>

      <form action="/users/stores/add" method="POST" enctype="multipart/form-data" class="add-store-form">
        <div class="input-group">
          <label for="storeName"><i class="fas fa-store"></i> Store Name</label>
          <input type="text" id="storeName" name="storeName" required>
        </div>

        <!-- Owner's Name -->
        <div class="input-group">
          <label><i class="fas fa-user"></i> Owner's Name</label>
          <div class="owner-name-group">
            <input type="text" id="ownerFirstName" name="ownerFirstName" placeholder="First Name" required>
            <input type="text" id="ownerSecondName" name="ownerSecondName" placeholder="Middle Name (optional)" style="display:none;">
            <input type="text" id="ownerLastName" name="ownerLastName" placeholder="Last Name" required>
            <button type="button" id="toggleSecondNameBtn" class="btn-icon small"><i class="fas fa-plus"></i></button>
          </div>
        </div>

        <div class="input-group">
          <label for="ownerEmail"><i class="fas fa-envelope"></i> Owner's Email</label>
          <input type="email" id="ownerEmail" name="ownerEmail" required>
        </div>

        <div class="input-group">
          <label for="contactInfo"><i class="fas fa-phone"></i> Contact Information</label>
          <input type="text" id="contactInfo" name="contactInfo" required>
        </div>

        <div class="input-group">
          <label for="location"><i class="fas fa-map-marker-alt"></i> Location</label>
          <input type="text" id="location" name="location" required>
        </div>

        <div class="input-group">
          <label for="storeLogo"><i class="fas fa-image"></i> Store Logo</label>
          <input type="file" id="storeLogo" name="storeLogo" accept=".jpg,.png,.jpeg" required>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-secondary store-cancel">Cancel</button>
          <button type="submit" class="btn-primary">Register</button>
        </div>
      </form>
    </div>
  </div>

  <script src="/stores.js"></script>
  <script>
    // Toggle middle name
    document.addEventListener("DOMContentLoaded", function() {
      const toggleBtn = document.getElementById("toggleSecondNameBtn");
      const secondNameField = document.getElementById("ownerSecondName");

      toggleBtn.addEventListener("click", function() {
        if (secondNameField.style.display === "none" || secondNameField.style.display === "") {
          secondNameField.style.display = "inline-block";
          toggleBtn.innerHTML = "<i class='fas fa-minus'></i>";
        } else {
          secondNameField.style.display = "none";
          toggleBtn.innerHTML = "<i class='fas fa-plus'></i>";
          secondNameField.value = "";
        }
      });
    });
  </script>
</body>
</html>